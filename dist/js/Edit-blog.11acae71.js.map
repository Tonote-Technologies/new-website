{"version":3,"file":"js/Edit-blog.11acae71.js","mappings":"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","sources":["webpack://ToNote/./src/components/Admin/Blog/BlogEdit.vue","webpack://ToNote/./src/components/Admin/Blog/BlogEdit.vue?05fb","webpack://ToNote/./src/components/DropZone.vue","webpack://ToNote/./src/components/DropZone.vue?3e94"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"layout-specing\">\n      <section class=\"card p-4\">\n        <div class=\"d-md-flex justify-content-between\">\n          <div>\n            <h5 class=\"mb-0\">Edit Blog</h5>\n          </div>\n\n          <div class=\"my-4 mt-sm-0\"></div>\n        </div>\n        <div class=\"row\">\n          <div v-if=\"error === true\" class=\"danger\">{{ errorMsg }}</div>\n          <div class=\"col-md-8 my-5\">\n            <form @submit.prevent=\"updatePost\" role=\"form\">\n              <div class=\"form-group\">\n                <label>Post Title </label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"title\"\n                  v-model=\"title\"\n                  placeholder=\"Enter the title of the blog\"\n                  required\n                />\n              </div>\n\n              <div class=\"form-group my-2\">\n                <label class=\"form-label\">Blog Category</label>\n                <select class=\"form-control\" v-model=\"category\" required>\n                  <option value=\"\">Select Category</option>\n                  <option value=\"e-signing\">E-signing</option>\n                  <option value=\"buisness\">Buisness</option>\n                </select>\n              </div>\n              <div class=\"form-group\">\n                <label>\n                  Featured Image - This image will be displayed on your blog\n                  post!\n                </label>\n                <div class=\"form-group\">\n                  <div><img :src=\"file\" width=\"150\" :alt=\"title\" /></div>\n                  <template v-if=\"!isUpload\">\n                    <p>MAX FILE SIZE: 2MB</p>\n                    <p class=\"text-danger\">{{ fileValidated }}</p>\n                    <DropZone @drop.prevent=\"drop\" @change=\"selectedFile\">\n                      <template #format> PNG, JPEG OR JPG </template>\n                      <template #input>\n                        <input\n                          type=\"file\"\n                          id=\"dropzoneFile\"\n                          class=\"dropzoneFile\"\n                          accept=\"image/png, image/jpg, image/jpeg\"\n                        />\n                      </template>\n                    </DropZone>\n                  </template>\n                  <template v-else>\n                    <div\n                      class=\"d-flex justify-content-center align-items-center my-2\"\n                    >\n                      <div class=\"grid grid__1 w-100\" style=\"height: 200px\">\n                        <div class=\"position-relative\">\n                          <img\n                            :src=\"preview\"\n                            class=\"img-fluid\"\n                            width=\"120\"\n                            alt=\"preview\"\n                          />\n                          <div\n                            class=\"position-absolute top-0 start-100 translate-middle\"\n                          >\n                            <button\n                              class=\"btn-close bg-danger rounded-circle\"\n                              v-show=\"isUpload\"\n                              @click=\"isUpload = !isUpload\"\n                              style=\"padding: 10px\"\n                            ></button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </template>\n                </div>\n              </div>\n              <div class=\"form-group my-2\">\n                <label>Excerpt - optional</label>\n                <textarea\n                  required\n                  class=\"form-control excerpt\"\n                  name=\"excerpt\"\n                  v-model=\"excerpt\"\n                  placeholder=\"Write an excerpt\"\n                  style=\"height: 120px\"\n                ></textarea>\n              </div>\n\n              <div class=\"form-group my-2\">\n                <label>Post content </label>\n                <textarea\n                  required\n                  class=\"form-control bcontent\"\n                  name=\"content\"\n                  v-model=\"content\"\n                  style=\"height: 120px\"\n                  placeholder=\"Compose content for the blog post. Users will see everything on this post once it is published.\"\n                ></textarea>\n              </div>\n              <div class=\"form-group my-2\">\n                <label class=\"label-control\" for=\"status\">Status</label>\n                <div>\n                  <select\n                    v-model=\"status\"\n                    name=\"status\"\n                    type=\"checkbox\"\n                    class=\"form-control\"\n                  >\n                    <option value=\"\">Select Status</option>\n                    <option value=\"draft\">Draft</option>\n                    <option value=\"live\">Live</option>\n                  </select>\n                </div>\n              </div>\n              <div class=\"form-group my-2\">\n                <input type=\"hidden\" name=\"created_at\" v-model=\"created_at\" />\n              </div>\n              <div class=\"\">\n                <!-- <button class=\"btn btn-md btn-outline-dark me-1\">Save as draft</button> -->\n                <button class=\"btn btn-md btn-primary\">Update</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </section>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport DropZone from \"@/components/DropZone.vue\";\nimport { db } from \"@/firebase\";\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\nimport moment from \"moment\";\n\nconst isUpload = ref(false);\n\nconst dropzoneFile = ref(\"\");\nconst preview = ref(null);\nconst fileValidated = ref(\"\");\nconst isSelected = ref(false);\n\nconst preparedFile = (file) => {\n  let reader = new FileReader();\n\n  reader.onloadend = () => {\n    preview.value = reader.result;\n  };\n\n  reader.readAsDataURL(file);\n  isSelected.value = true;\n};\n\nconst drop = (e) => {\n  isUpload.value = true;\n  let dropFiles = (dropzoneFile.value = e.dataTransfer.files[0]);\n  const fileSize = dropFiles.size;\n  const fileMb = fileSize / 1024 ** 2;\n  if (fileMb >= 2) {\n    isUpload.value = false;\n    fileValidated.value = \"Please select a file less than 2MB.\";\n    setTimeout(() => {\n      isSelected.value = false;\n    }, 100);\n  }\n\n  preparedFile(dropFiles);\n};\n\nconst selectedFile = () => {\n  isUpload.value = true;\n  let dropFiles = (dropzoneFile.value =\n    document.querySelector(\".dropzoneFile\").files[0]);\n  const fileSize = dropFiles.size;\n  const fileMb = fileSize / 1024 ** 2;\n\n  if (fileMb >= 2) {\n    isUpload.value = false;\n    fileValidated.value = \"Please select a file less than 2MB.\";\n    setTimeout(() => {\n      isSelected.value = false;\n    }, 100);\n  }\n\n  preparedFile(dropFiles);\n};\n\nconst today = () => {\n  return moment().format(\"YYYY-MM-DD, HH:mm A\");\n};\n\nconst route = useRouter();\nconst blogId = ref(\"\");\nconst title = ref(\"\");\nconst category = ref(\"\");\nconst excerpt = ref(\"\");\nconst content = ref(\"\");\nconst status = ref(\"\");\nconst file = ref(\"\");\nconst updated_at = ref(today());\nconst error = ref(false);\nconst errorMsg = ref(\"\");\n\nconst fetchData = async (docRef) => {\n  const docSnap = await getDoc(docRef);\n\n  if (docSnap.exists()) {\n    // console.log(\"Document data:\", docSnap.data());\n    const data = docSnap.data();\n    title.value = data.title;\n    category.value = data.category;\n    excerpt.value = data.excerpt;\n    content.value = data.content;\n    status.value = data.status;\n    preview.value = file.value = data.file ;\n    // file.value = data.file;\n    updated_at.value = today();\n  } else {\n    // doc.data() will be undefined in this case\n    console.log(\"No such document!\");\n  }\n};\n\n// const blogPost = ref([]);\nconst updatePost = () => {\n  if (\n    title.value != \"\" &&\n    category.value != \"\" &&\n    excerpt.value != \"\" &&\n    content.value != \"\" &&\n    status.value != \"\"\n  ) {\n    error.value = false;\n    errorMsg.value = \"\";\n\n    const sendData = doc(db, \"blogPost\", blogId.value);\n    const obj = {\n      title: title.value,\n      category: category.value,\n      excerpt: excerpt.value,\n      content: content.value,\n      status: status.value,\n      file: preview.value,\n    };\n    // console.log(obj);\n    // console.log(updateDoc);\n    updateDoc(sendData, obj);\n    route.push({ name: \"admin.dashboard\" }); // return;\n  }\n  error.value = true;\n  errorMsg.value = \"Please fill out all the fields!\";\n  console.log(error.value);\n  console.log(errorMsg.value);\n  return;\n};\n\nonMounted(() => {\n  blogId.value = route.currentRoute.value.params.blog_id;\n  const docRef = doc(db, \"blogPost\", blogId.value);\n  fetchData(docRef);\n});\n</script>\n\n<style scoped>\n.dropzoneFile {\n  display: none;\n}\n</style>\n","import script from \"./BlogEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BlogEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BlogEdit.vue?vue&type=style&index=0&id=4a1dce49&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/macbook/Desktop/website/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4a1dce49\"]])\n\nexport default __exports__","<template>\n  <div class=\"w-100\">\n    <div\n      @dragenter.prevent=\"toggleActive\"\n      @dragleave.prevent=\"toggleActive\"\n      @dragover.prevent\n      @drop.prevent=\"toggleActive\"\n      :class=\"{ 'active-dropzone': active }\"\n      class=\"dropzone\"\n    >\n      <label for=\"dropzoneFile\" class=\"custom-upload\" role=\"button\">\n        <div class=\"text-center\">\n          <h4>Drag and drop to upload</h4>\n          <h4>OR</h4>\n          <h4 class=\"btn btn-primary\">Select File</h4>\n          <div class=\"text-muted mt-1\" style=\"font-size: 12px\">\n            <slot name=\"format\">PDF, DOC, DOCX, PNG, JPG or JPEG only</slot>\n          </div>\n          <slot name=\"input\">\n            <input\n              type=\"file\"\n              id=\"dropzoneFile\"\n              multiple\n              class=\"dropzoneFile\"\n            />\n          </slot>\n        </div>\n      </label>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\n\nconst active = ref(false);\n\nconst toggleActive = () => {\n  active.value = !active.value;\n};\n</script>\n\n<style scoped>\n.dropzone {\n  width: 100%;\n  height: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  row-gap: 16px;\n  border: 2px dashed #999;\n  background-color: #fff;\n  transition: 0.3s ease all;\n  border-radius: 3px;\n}\n\nlabel {\n  transition: 0.3s ease all;\n}\n\n.dropzone input {\n  display: none;\n}\n\n.active-dropzone {\n  color: #fff;\n  border-color: #fff;\n  background-color: #00cfe8;\n}\n\n.custom-upload {\n  width: 100%;\n  height: 100%;\n  display: grid;\n  place-items: center;\n}\n\n.dropzone:hover {\n  border-color: #4169e1;\n}\n</style>\n","import script from \"./DropZone.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DropZone.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DropZone.vue?vue&type=style&index=0&id=497fdd98&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/macbook/Desktop/website/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-497fdd98\"]])\n\nexport default __exports__"],"names":["isUpload","ref","dropzoneFile","preview","fileValidated","isSelected","preparedFile","file","reader","FileReader","onloadend","value","result","readAsDataURL","drop","e","dropFiles","dataTransfer","files","fileSize","size","fileMb","setTimeout","selectedFile","document","querySelector","today","moment","format","route","useRouter","blogId","title","category","excerpt","content","status","updated_at","error","errorMsg","fetchData","async","docSnap","getDoc","docRef","exists","data","console","log","updatePost","sendData","doc","db","obj","updateDoc","push","name","onMounted","currentRoute","params","blog_id","__exports__","active","toggleActive"],"sourceRoot":""}